<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>babygirl.</title>
    <link rel="icon" type="image/png" href="image.png">
    <!-- Add Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #fef6f6;
            color: #333;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ffb6c1;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: #fff;
            border: 1px solid #ffb6c1;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            color: #d63384;
        }
        .tab.active {
            background: #ffb6c1;
            color: #fff;
        }
        #contentArea {
            background: #fff;
            border: 1px solid #ffb6c1;
            border-radius: 0 0 5px 5px;
            padding: 20px;
            min-height: 300px;
        }
        .task-card, .mind-option, .drive-option {
            background: #ffecef;
            border: 1px solid #ffb6c1;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.2s;
        }
        .task-card:hover, .mind-option:hover, .drive-option:hover {
            background: #ffd6e0;
            transform: translateY(-2px);
        }
        .section-header {
            color: #d63384;
            margin-top: 0;
        }
        .active-task {
            background: #ffecef;
            border: 1px solid #ffb6c1;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .done-button {
            background: #d63384;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
        }
        .scoring-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .scoring-table th, .scoring-table td {
            border: 1px solid #ffb6c1;
            padding: 10px;
            text-align: left;
        }
        .score-input {
            width: 60px;
            padding: 5px;
            border: 1px solid #ffb6c1;
            border-radius: 3px;
        }
        #floatingOutput {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #d63384;
            color: #fff;
            padding: 10px 20px;
            border-radius: 5px;
            display: none;
            z-index: 1000;
        }
        #floatingOutput.show {
            display: block;
            animation: fadeInOut 5s forwards;
        }
        @keyframes fadeInOut {
            0% { opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { opacity: 0; }
        }
        .drive-breadcrumb {
            margin-bottom: 15px;
            font-size: 0.9em;
        }
        .breadcrumb-item {
            color: #d63384;
            cursor: pointer;
        }
        .breadcrumb-separator {
            margin: 0 5px;
            color: #ffb6c1;
        }
        .upload-area {
            margin-top: 20px;
        }
        .upload-button {
            background: #d63384;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            margin-top: 10px;
        }
        .chat-area {
            margin-top: 20px;
        }
        .chat-message {
            background: #ffecef;
            border: 1px solid #ffb6c1;
            border-radius: 10px;
            padding: 10px;
            margin: 5px 0;
        }
        .chat-input {
            width: calc(100% - 80px);
            padding: 8px;
            border: 1px solid #ffb6c1;
            border-radius: 5px;
            margin-right: 10px;
        }
        .send-button {
            background: #d63384;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="intro" onclick="switchTab('intro')">Intro</div>
            <div class="tab" data-tab="pending" onclick="switchTab('pending')">Pending</div>
            <div class="tab" data-tab="mind" onclick="switchTab('mind')">Mind</div>
            <div class="tab" data-tab="drive" onclick="switchTab('drive')">Drive</div>
            <div class="tab" data-tab="active" onclick="switchTab('active')">Active</div>
            <div class="tab" data-tab="scoring" onclick="switchTab('scoring')">Scoring</div>
            <div class="tab" data-tab="chat" onclick="switchTab('chat')">Chat</div>
            <div class="tab" data-tab="uploads" onclick="switchTab('uploads')">Uploads</div>
        </div>
        <div id="contentArea">
            <!-- Content will be loaded here dynamically -->
        </div>
        <div id="floatingOutput"></div>
    </div>

    <script>
        // ==========================================
        // FIREBASE CONFIGURATION - REPLACE WITH YOUR OWN
        // ==========================================
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            databaseURL: "YOUR_DATABASE_URL",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);

        // ==========================================
        // DATABASE AND STORAGE REFERENCES
        // ==========================================
        const db = firebase.database();
        const storage = firebase.storage();

        // ==========================================
        // YOUR EASILY EDITABLE CONTENT (UNCHANGED)
        // ==========================================
        const PENDING_TASKS = [
            "I'll remember that he loves me, no matter what I do, for I am his submissive babygirl, his personal princess.",
            "I am going to try to keep up with my weekly passive task.",
            "I am going to try to keep up with whatever active tasks I have.",
            "I'll remember that I can choose to do anything other than decided tasks too, or not do decided tasks, and that will be just okay."
        ];

        const MIND_OPTIONS = [
            "I think I can work in an interview today. 😋",
            "Maybe I can take you along for a trip to the shower? 🚿",
            "I'd love a little one-on-one video call, maybe. 💞",
            "Can you just teach me how to dirty-talk well with you? 😙"
        ];

        const DRIVE_OPTIONS = {
            level1: [
                "Passive Tasks?",
                "A sexy video?",
                "A hot picture?"
            ],
            level2: {
                "Passive Tasks?": [
                    "Clothing-related",
                    "Mind-related",
                    "Other Passive Tasks"
                ],
                "A sexy video?": [
                    "Starting Clothed",
                    "Starting Nude",
                    "Special Submission"
                ],
                "A hot picture?": [
                    "Object-interaction",
                    "Accessories",
                    "Special Submissive"
                ]
            },
            level3: {
                "Clothing-related": [
                    "I will skip on wearing panties for a week. You can check in on me any time I am free.",
                    "I know I look hot in my pink and nude bras. I'll wear only these for the next two days: you can check in any time I am free",
                    "I will inform you at least two days this week that I am wearing my black vest with no bra underneath, and you can decide what you want to do with me then."
                ],
                "Mind-related": [
                    "A healthy body begets a healthy mind. I will do ten push-ups with you on a video call at least three times this week.",
                    "I know I look hot with my hair down. I will send you at least three separate videos throughout the week showing you that I am studying with my hair down.",
                    "Every night this week before going to bed, I am going to tell you what I like most about myself, and I would love it if you praised me for it too."
                ],
                "Other Passive Tasks": [
                    "I'll voluntarily learn how to truly talk like a submissive with you at least once every day this week, right here on this webpage.",
                    "I'll send you a voice note affirming my submission to you, every night of this week, along with my good night text.",
                    "I'll write anything, anywhere, on my body to confirm my willingness to obey you, and show you suitable proof of it, thrice this week."
                ],
                "Starting Clothed": [
                    "I will start out standing, wearing only a vest and panties, and then lower my panties to my thighs to present my pussy to you, all the while smiling at you.",
                    "I will start out standing, wearing only a vest and panties, and then lower my vest to my stomach to present my breasts to you, all the while smiling at you.",
                    "I'll begin wearing a towel covering my breasts and pussy and my hair tied up: I will first lower the towel to release my breasts, smile at you, and then let my hair down."
                ],
                "Starting Nude": [
                    "Please let me be naked on video for you, standing upright and saying how much I love being your good girl, and then turning around to present my ass to you.",
                    "I would think nothing of playing with my boobs for you, while kneeling. I love to be your good girl!",
                    "I would love to role-play an Instagram vlogger and give you a nice introduction to all the various spots of interest on my body, and hope to draw your attention to each."
                ],
                "Special Submission": [
                    "I will get topless for you, and send you a top-half-only video of me putting on eyeliner, because I know it makes me prettier still, and you love it so.",
                    "I'll start out in my black bra and dark panties, my hair tied up. I will begin by turning around, letting my hair and panties down, and taking my bra off. I'll turn back around after five seconds, and push my hair to my front, hands clasped in front in submission.",
                    "I'll start out naked, pull up a chair and sit in it, and then wear my pendant in front of you. I'll stand back up and then give you a little twirl so you can appreciate every inch of me."
                ],
                "Object-interaction": [
                    "I'll strip down completely, and take a pic of me sitting in a chair and smiling in a mirror selfie, hair down, with an arm loosely held behind me, my legs wide apart for you to savour what's in between.",
                    "Since you love teaching me, maybe I can take a mirror selfie with a book held up to my face, my hair down, wearing nothing but panties, and every other inch of me on display for you",
                    ""
                ],
                "Accessories": [
                    "I'd love to send you an upper-half profile topless picture of me without my glasses, hair tied up tight, wearing eyeliner and basic makeup. I love being pretty for you!",
                    "A simple nude front profile mirror selfie, standing with a foot planted in front of the other, one hand loosely covering my pussy, wearing nothing but my college ID card.",
                    "I'll put on any earrings I can find, turn my head slightly to show them to you, while clicking a mirror selfie wearing nothing but my panties, pulled down to my thighs, legs close together and one foot slightly in front of the other."
                ],
                "Special Submissive": [
                    "Maybe I'll take a simple nude of me kneeling with my hair in a single braid and in front of me, my eyes lowered, a playful smile on my lips, my hands behind me even as i thrust my chest out for you?",
                    "I'll place a palm under each boob of mine, pushing them up and presenting them to you as they should be, while standing nude, legs close together, one foot slightly in front of the other.",
                    "I can use a handkerchief as a kind of gag over my mouth, wearing nothing but my bra as I kneel for you, hands behind me, hair down, spectacles off? I'll make sure that one strap of the bra is lowered to my shoulder, ensuring enough of my breast is on teasing display for you."
                ]
            }
        };

        const WEEKLY_TASKS = [
            "As underwear, you are allowed to wear only bras on Monday, Wednesday, Thursday, and Saturday, and only panties every other day. Don't let me down. 😘"
        ];

        const DOM_RESPONSES = [
            "Good girl, I'm very proud of your dedication.",
            "You're doing wonderfully, babygirl. Keep it up.",
            "I love seeing your progress and commitment.",
            "Remember to focus on your tasks and growth.",
            "Your obedience brings me great pleasure.",
            "You're becoming exactly what I want you to be.",
            "I appreciate your honesty and openness.",
            "Continue to be the perfect submissive for me."
        ];

        const INTRO_TEXT = {
            title: "Welcome, babygirl.",
            description: "Step inside your private playground. Here, you’re free to be bold, to tease, to surrender, and to shine. Every click, every word, every task is a secret invitation—just for you and me. Let your desires show, let your devotion burn, and let’s make every moment on this page a little more wicked, a little more delicious, and a lot more unforgettable. Are you ready to play?"
        };

        // ==========================================
        // APP STATE (NOW SYNCHRONIZED WITH FIREBASE)
        // ==========================================
        const appState = {
            currentTab: 'intro',
            activeTasks: [],
            scoringData: [],
            driveNavigation: [],
            chatMessages: [],
            uploads: []
        };

        // ==========================================
        // FIREBASE LISTENERS FOR REAL-TIME SYNC
        // ==========================================

        // Listen for changes to activeTasks
        db.ref('activeTasks').on('value', (snapshot) => {
            appState.activeTasks = snapshot.val() || [];
            if (appState.currentTab === 'active') showActiveTasks();
        });

        // Listen for changes to scoringData
        db.ref('scoringData').on('value', (snapshot) => {
            appState.scoringData = snapshot.val() || [];
            updateAverageScore();
            if (appState.currentTab === 'scoring') showScoring();
        });

        // Listen for changes to chatMessages
        db.ref('chatMessages').on('value', (snapshot) => {
            appState.chatMessages = snapshot.val() || [];
            if (appState.currentTab === 'chat') loadChatMessages();
        });

        // Listen for changes to uploads
        db.ref('uploads').on('value', (snapshot) => {
            appState.uploads = snapshot.val() || [];
            if (appState.currentTab === 'uploads') updateUploadDisplay();
        });

        // ==========================================
        // UTILITY FUNCTIONS (REPLACED WITH FIREBASE OPERATIONS)
        // ==========================================

        function saveToFirebase(key, data) {
            db.ref(key).set(data);
        }

        function showFloatingOutput(text) {
            const output = document.getElementById('floatingOutput');
            output.textContent = text;
            output.classList.add('show');
            setTimeout(() => {
                output.classList.remove('show');
            }, 5000);
        }

        async function addToActiveTasks(taskText) {
            const newTask = {
                id: Date.now(),
                text: taskText,
                timestamp: new Date().toISOString()
            };
            const tasks = [...(appState.activeTasks || []), newTask];
            if (tasks.length > 5) tasks.shift(); // Keep only the latest 5
            await saveToFirebase('activeTasks', tasks);
        }

        function addToScoringData(taskText) {
            const newScore = {
                id: Date.now(),
                text: taskText,
                score: 0
            };
            const scores = [...(appState.scoringData || []), newScore];
            saveToFirebase('scoringData', scores);
        }

        function addToChatMessages(message) {
            const newMsg = {
                id: Date.now(),
                text: message,
                timestamp: new Date().toISOString()
            };
            const msgs = [...(appState.chatMessages || []), newMsg];
            saveToFirebase('chatMessages', msgs);
        }

        function addToUploads(uploadInfo) {
            const newUpload = {
                id: Date.now(),
                ...uploadInfo,
                timestamp: new Date().toISOString()
            };
            const uploads = [...(appState.uploads || []), newUpload];
            saveToFirebase('uploads', uploads);
        }

        function updateAverageScore() {
            if (appState.scoringData.length === 0) {
                document.getElementById('averageScore')?.textContent = '0';
                return;
            }
            const total = appState.scoringData.reduce((sum, item) => sum + (item.score || 0), 0);
            const average = Math.round(total / appState.scoringData.length);
            document.getElementById('averageScore')?.textContent = average;
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            if (tabName !== 'drive') {
                appState.driveNavigation = [];
            }

            appState.currentTab = tabName;

            switch (tabName) {
                case 'pending':
                    showPendingTasks();
                    break;
                case 'mind':
                    showMindOptions();
                    break;
                case 'drive':
                    showDriveOptions();
                    break;
                case 'active':
                    showActiveTasks();
                    break;
                case 'scoring':
                    showScoring();
                    break;
                case 'chat':
                    showChat();
                    break;
                case 'uploads':
                    showUploads();
                    break;
                default:
                    showIntroScreen();
            }
        }

        function showIntroScreen() {
            document.getElementById('contentArea').innerHTML = `
                <div class="intro-screen">
                    <h2>${INTRO_TEXT.title}</h2>
                    <p>${INTRO_TEXT.description}</p>
                </div>
            `;
        }

        function showPendingTasks() {
            const content = `
                <h2 class="section-header">Some things you should never forget♥</h2>
                ${PENDING_TASKS.map(task => `
                    <div class="task-card" onclick="handleTaskClick('${task.replace(/'/g, "\\'")}')">
                        <span style="position: relative; z-index: 1;">${task}</span>
                    </div>
                `).join('')}
            `;
            document.getElementById('contentArea').innerHTML = content;
        }

        function showMindOptions() {
            const content = `
                <h2 class="section-header">Hi, hottie. What do you want to do for me today?</h2>
                ${MIND_OPTIONS.map(option => `
                    <div class="mind-option" onclick="handleMindClick('${option.replace(/'/g, "\\'")}')">
                        <span style="position: relative; z-index: 1;">${option}</span>
                    </div>
                `).join('')}
            `;
            document.getElementById('contentArea').innerHTML = content;
        }

        function showDriveOptions() {
            const breadcrumb = appState.driveNavigation.length > 0 ?
                `<div class="drive-breadcrumb">
                    <span class="breadcrumb-item" onclick="resetDriveNavigation()">🏠 Start</span>
                    ${appState.driveNavigation.map((item, index) => `
                        <span class="breadcrumb-separator">→</span>
                        <span class="breadcrumb-item" onclick="navigateDriveTo(${index})">${item}</span>
                    `).join('')}
                </div>` : '';

            let content = `
                <h2 class="section-header">Hey, cutie. Do you wish to drive for a while?</h2>
                ${breadcrumb}
            `;

            if (appState.driveNavigation.length === 0) {
                content += DRIVE_OPTIONS.level1.map(option => `
                    <div class="drive-option" onclick="handleDriveClick('${option}', 1)">
                        <span style="position: relative; z-index: 1;">${option}</span>
                    </div>
                `).join('');
            } else if (appState.driveNavigation.length === 1) {
                const level1Choice = appState.driveNavigation[0];
                content += DRIVE_OPTIONS.level2[level1Choice].map(option => `
                    <div class="drive-option" onclick="handleDriveClick('${option}', 2)">
                        <span style="position: relative; z-index: 1;">${option}</span>
                    </div>
                `).join('');
            } else if (appState.driveNavigation.length === 2) {
                const level2Choice = appState.driveNavigation[1];
                content += DRIVE_OPTIONS.level3[level2Choice].map(option => `
                    <div class="drive-option" onclick="handleDriveClick('${option.replace(/'/g, "\\'")}', 3)">
                        <span style="position: relative; z-index: 1;">${option}</span>
                    </div>
                `).join('');
            }

            document.getElementById('contentArea').innerHTML = content;
        }

        function showActiveTasks() {
            const content = `
                <h2 class="section-header">All your active tasks.</h2>
                ${appState.activeTasks && appState.activeTasks.length === 0 ?
                    '<p style="text-align: center; opacity: 0.7; font-style: italic; font-size: 1.2rem; margin-top: 40px;">No active tasks yet. Complete tasks from other tabs to see them here.</p>' :
                    appState.activeTasks.map(task => `
                        <div class="active-task">
                            <span>${task.text}</span>
                            <button class="done-button" onclick="markTaskDone(${task.id})" title="Dom Only">Done</button>
                        </div>
                    `).join('')
                }
            `;
            document.getElementById('contentArea').innerHTML = content;
        }

        function showScoring() {
            const content = `
                <h2 class="section-header">Marking for your completed tasks.</h2>
                <p>Average Score: <span id="averageScore">0</span></p>
                ${appState.scoringData && appState.scoringData.length === 0 ?
                    '<p style="text-align: center; opacity: 0.7; font-style: italic; font-size: 1.2rem; margin-top: 40px;">No completed tasks to score yet.</p>' :
                    `<table class="scoring-table">
                        <thead>
                            <tr>
                                <th>Task</th>
                                <th>Score (out of 100)</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${appState.scoringData.map(item => `
                                <tr>
                                    <td>${item.text}</td>
                                    <td>
                                        <input type="number" class="score-input" min="0" max="100"
                                               value="${item.score}"
                                               onchange="updateScore(${item.id}, this.value)">
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>`
                }
            `;
            document.getElementById('contentArea').innerHTML = content;
        }

        function showChat() {
            const content = `
                <h2 class="section-header">Chat</h2>
                <div id="chatMessages" class="chat-area"></div>
                <div style="display: flex; margin-top: 10px;">
                    <input type="text" id="chatInput" class="chat-input" placeholder="Type your message...">
                    <button class="send-button" onclick="sendChatMessage()">Send</button>
                </div>
            `;
            document.getElementById('contentArea').innerHTML = content;
            loadChatMessages();
        }

        function showUploads() {
            const content = `
                <h2 class="section-header">Uploads</h2>
                <div id="uploadDisplay"></div>
                <div class="upload-area">
                    <input type="file" id="fileInput" accept="image/*,video/*">
                    <button class="upload-button" onclick="uploadFile()">Upload</button>
                </div>
            `;
            document.getElementById('contentArea').innerHTML = content;
            updateUploadDisplay();
        }

        function loadChatMessages() {
            if (!document.getElementById('chatMessages')) return;
            const chatArea = document.getElementById('chatMessages');
            chatArea.innerHTML = appState.chatMessages.map(msg => `
                <div class="chat-message">
                    <span>${msg.text}</span>
                </div>
            `).join('');
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function updateUploadDisplay() {
            if (!document.getElementById('uploadDisplay')) return;
            const uploadDisplay = document.getElementById('uploadDisplay');
            uploadDisplay.innerHTML = appState.uploads.map(upload => {
                if (upload.type.startsWith('image/')) {
                    return `<img src="${upload.url}" style="max-width: 200px; max-height: 200px; margin: 5px;" alt="Uploaded image">`;
                } else if (upload.type.startsWith('video/')) {
                    return `<video src="${upload.url}" style="max-width: 200px; max-height: 200px; margin: 5px;" controls></video>`;
                } else {
                    return `<a href="${upload.url}" target="_blank">Download File</a>`;
                }
            }).join('');
        }

        // ==========================================
        // EVENT HANDLERS
        // ==========================================

        function handleTaskClick(task) {
            showFloatingOutput(`Task added: ${task}`);
        }

        function handleMindClick(option) {
            showFloatingOutput(`Mind state recorded: ${option}`);
        }

        function handleDriveClick(option, level) {
            if (level === 1) {
                appState.driveNavigation = [option];
            } else if (level === 2) {
                appState.driveNavigation = [appState.driveNavigation[0], option];
            } else if (level === 3) {
                showFloatingOutput(`Drive task chosen: ${option}`);
                addToActiveTasks(option);
                addToScoringData(option);
                appState.driveNavigation = [];
            }
            showDriveOptions();
        }

        function resetDriveNavigation() {
            appState.driveNavigation = [];
            showDriveOptions();
        }

        function navigateDriveTo(index) {
            appState.driveNavigation = appState.driveNavigation.slice(0, index + 1);
            showDriveOptions();
        }

        function markTaskDone(id) {
            const newTasks = appState.activeTasks.filter(task => task.id !== id);
            saveToFirebase('activeTasks', newTasks);
        }

        function updateScore(id, score) {
            const newScores = appState.scoringData.map(item => {
                if (item.id === parseInt(id)) {
                    return { ...item, score: parseInt(score) };
                }
                return item;
            });
            saveToFirebase('scoringData', newScores);
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            if (input.value.trim() === '') return;
            addToChatMessages(input.value);
            input.value = '';
        }

        function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            if (!fileInput.files || fileInput.files.length === 0) return;

            const file = fileInput.files[0];
            const storageRef = storage.ref('uploads/' + Date.now() + '-' + file.name);
            storageRef.put(file).then((snapshot) => {
                return snapshot.ref.getDownloadURL();
            }).then((url) => {
                addToUploads({
                    url: url,
                    type: file.type,
                    name: file.name
                });
                fileInput.value = '';
            }).catch((error) => {
                showFloatingOutput('Upload failed: ' + error.message);
            });
        }

        // ==========================================
        // INITIALIZATION
        // ==========================================
        switchTab('intro');
    </script>
</body>
</html>
